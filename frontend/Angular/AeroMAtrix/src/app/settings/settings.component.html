<div class="settings-container" @fadeIn>
  <!-- Page Header -->
  <div class="page-header">
    <h1>{{ "SETTINGS.TITLE" | translate }}</h1>
    <p>{{ "SETTINGS.SUBTITLE" | translate }}</p>
  </div>

  <p-tabView>
    <!-- General Settings -->
    <p-tabPanel [header]="'SETTINGS.GENERAL.TITLE' | translate">
      <p-card>
        <div class="settings-section">
          <h2>{{ "SETTINGS.GENERAL.APP_SETTINGS" | translate }}</h2>

          <!-- Dark Mode Setting -->
          <div class="setting-item">
            <div class="setting-label">
              <label for="darkMode">{{
                "SETTINGS.GENERAL.DARK_MODE" | translate
              }}</label>
              <small>{{ "SETTINGS.GENERAL.DARK_MODE_DESC" | translate }}</small>
            </div>
            <p-inputSwitch
              [(ngModel)]="settings.darkMode"
              inputId="darkMode"
              (onChange)="onThemeChange()"
            ></p-inputSwitch>
          </div>

          <!-- Animations Setting -->
          <div class="setting-item">
            <div class="setting-label">
              <label for="animations">{{
                "SETTINGS.GENERAL.ANIMATIONS" | translate
              }}</label>
              <small>{{
                "SETTINGS.GENERAL.ANIMATIONS_DESC" | translate
              }}</small>
            </div>
            <p-inputSwitch
              [(ngModel)]="settings.animations"
              inputId="animations"
            ></p-inputSwitch>
          </div>

          <!-- Language Setting -->
          <div class="setting-item">
            <div class="setting-label">
              <label for="language">{{
                "SETTINGS.GENERAL.LANGUAGE" | translate
              }}</label>
              <small>{{ "SETTINGS.GENERAL.LANGUAGE_DESC" | translate }}</small>
            </div>
            <p-dropdown
              [options]="languageOptions"
              [(ngModel)]="settings.language"
              optionLabel="name"
              styleClass="w-full md:w-14rem"
              (onChange)="onLanguageChange()"
            ></p-dropdown>
          </div>

          <!-- Notifications Setting -->
          <div class="setting-item">
            <div class="setting-label">
              <label for="notifications">{{
                "SETTINGS.GENERAL.NOTIFICATIONS" | translate
              }}</label>
              <small>{{
                "SETTINGS.GENERAL.NOTIFICATIONS_DESC" | translate
              }}</small>
            </div>
            <p-inputSwitch
              [(ngModel)]="settings.notifications"
              inputId="notifications"
            ></p-inputSwitch>
          </div>
        </div>

        <p-divider></p-divider>

        <div class="settings-section">
          <h2>{{ "SETTINGS.GENERAL.DATA_DISPLAY" | translate }}</h2>

          <!-- Items Per Page Setting -->
          <div class="setting-item">
            <div class="setting-label">
              <label for="itemsPerPage">{{
                "SETTINGS.GENERAL.ITEMS_PER_PAGE" | translate
              }}</label>
              <small>{{
                "SETTINGS.GENERAL.ITEMS_PER_PAGE_DESC" | translate
              }}</small>
            </div>
            <p-inputNumber
              [(ngModel)]="settings.itemsPerPage"
              [showButtons]="true"
              [min]="5"
              [max]="100"
              [step]="5"
              styleClass="w-full md:w-14rem"
            ></p-inputNumber>
          </div>

          <!-- Date Format Setting -->
          <div class="setting-item">
            <div class="setting-label">
              <label for="dateFormat">{{
                "SETTINGS.GENERAL.DATE_FORMAT" | translate
              }}</label>
              <small>{{
                "SETTINGS.GENERAL.DATE_FORMAT_DESC" | translate
              }}</small>
            </div>
            <p-dropdown
              [options]="dateFormatOptions"
              [(ngModel)]="settings.dateFormat"
              optionLabel="label"
              styleClass="w-full md:w-14rem"
            ></p-dropdown>
          </div>
        </div>

        <div class="settings-actions">
          <button
            pButton
            label="{{ 'SETTINGS.ACTIONS.RESET' | translate }}"
            icon="pi pi-refresh"
            class="p-button-outlined p-button-secondary"
            (click)="resetGeneralSettings()"
            title="Reset general settings"
          ></button>
          <button
            pButton
            label="{{ 'SETTINGS.ACTIONS.SAVE' | translate }}"
            icon="pi pi-check"
            (click)="saveSettings('general')"
            title="Save general settings"
          ></button>
        </div>
      </p-card>
    </p-tabPanel>

    <!-- Drone Settings -->
    <p-tabPanel [header]="'SETTINGS.DRONE.TITLE' | translate">
      <p-card>
        <div class="settings-section">
          <h2>{{ "SETTINGS.DRONE.DEFAULT_SETTINGS" | translate }}</h2>

          <!-- Default Orientation Setting -->
          <div class="setting-item">
            <div class="setting-label">
              <label for="defaultOrientation">{{
                "SETTINGS.DRONE.DEFAULT_ORIENTATION" | translate
              }}</label>
              <small>{{
                "SETTINGS.DRONE.DEFAULT_ORIENTATION_DESC" | translate
              }}</small>
            </div>
            <p-dropdown
              [options]="orientationOptions"
              [(ngModel)]="settings.defaultOrientation"
              optionLabel="label"
              styleClass="w-full md:w-14rem"
            ></p-dropdown>
          </div>

          <!-- Auto Position Setting -->
          <div class="setting-item">
            <div class="setting-label">
              <label for="autoPosition">{{
                "SETTINGS.DRONE.AUTO_POSITION" | translate
              }}</label>
              <small>{{
                "SETTINGS.DRONE.AUTO_POSITION_DESC" | translate
              }}</small>
            </div>
            <p-inputSwitch
              [(ngModel)]="settings.autoPosition"
              inputId="autoPosition"
            ></p-inputSwitch>
          </div>
        </div>

        <p-divider></p-divider>

        <div class="settings-section">
          <h2>{{ "SETTINGS.DRONE.FLIGHT_CONTROLS" | translate }}</h2>

          <!-- Confirm Commands Setting -->
          <div class="setting-item">
            <div class="setting-label">
              <label for="confirmCommands">{{
                "SETTINGS.DRONE.CONFIRM_COMMANDS" | translate
              }}</label>
              <small>{{
                "SETTINGS.DRONE.CONFIRM_COMMANDS_DESC" | translate
              }}</small>
            </div>
            <p-inputSwitch
              [(ngModel)]="settings.confirmCommands"
              inputId="confirmCommands"
            ></p-inputSwitch>
          </div>

          <!-- Command Delay Setting -->
          <div class="setting-item">
            <div class="setting-label">
              <label for="commandDelay">{{
                "SETTINGS.DRONE.COMMAND_DELAY" | translate
              }}</label>
              <small>{{
                "SETTINGS.DRONE.COMMAND_DELAY_DESC" | translate
              }}</small>
            </div>
            <p-inputNumber
              [(ngModel)]="settings.commandDelay"
              [showButtons]="true"
              [min]="0"
              [max]="2000"
              [step]="100"
              styleClass="w-full md:w-14rem"
            ></p-inputNumber>
          </div>

          <!-- Boundary Check Setting -->
          <div class="setting-item">
            <div class="setting-label">
              <label for="boundaryCheck">{{
                "SETTINGS.DRONE.BOUNDARY_CHECK" | translate
              }}</label>
              <small>{{
                "SETTINGS.DRONE.BOUNDARY_CHECK_DESC" | translate
              }}</small>
            </div>
            <p-inputSwitch
              [(ngModel)]="settings.boundaryCheck"
              inputId="boundaryCheck"
            ></p-inputSwitch>
          </div>

          <!-- Collision Detection Setting -->
          <div class="setting-item">
            <div class="setting-label">
              <label for="collisionDetection">{{
                "SETTINGS.DRONE.COLLISION_DETECTION" | translate
              }}</label>
              <small>{{
                "SETTINGS.DRONE.COLLISION_DETECTION_DESC" | translate
              }}</small>
            </div>
            <p-inputSwitch
              [(ngModel)]="settings.collisionDetection"
              inputId="collisionDetection"
            ></p-inputSwitch>
          </div>
        </div>

        <div class="settings-actions">
          <button
            pButton
            label="{{ 'SETTINGS.ACTIONS.RESET' | translate }}"
            icon="pi pi-refresh"
            class="p-button-outlined p-button-secondary"
            (click)="resetDroneSettings()"
            title="Reset drone settings"
          ></button>
          <button
            pButton
            label="{{ 'SETTINGS.ACTIONS.SAVE' | translate }}"
            icon="pi pi-check"
            (click)="saveSettings('drone')"
            title="Save drone settings"
          ></button>
        </div>
      </p-card>
    </p-tabPanel>

    <!-- API Settings -->
    <p-tabPanel [header]="'SETTINGS.API.TITLE' | translate">
      <p-card>
        <div class="settings-section">
          <h2>{{ "SETTINGS.API.CONNECTION" | translate }}</h2>

          <!-- API URL Setting -->
          <div class="setting-item">
            <div class="setting-label">
              <label for="apiUrl">{{
                "SETTINGS.API.API_URL" | translate
              }}</label>
              <small>{{ "SETTINGS.API.API_URL_DESC" | translate }}</small>
            </div>
            <input
              pInputText
              [(ngModel)]="settings.apiUrl"
              class="w-full md:w-30rem"
              placeholder="Enter API URL"
              title="API URL"
            />
          </div>

          <!-- API Timeout Setting -->
          <div class="setting-item">
            <div class="setting-label">
              <label for="apiTimeout">{{
                "SETTINGS.API.REQUEST_TIMEOUT" | translate
              }}</label>
              <small>{{
                "SETTINGS.API.REQUEST_TIMEOUT_DESC" | translate
              }}</small>
            </div>
            <p-inputNumber
              [(ngModel)]="settings.apiTimeout"
              [showButtons]="true"
              [min]="1000"
              [max]="30000"
              [step]="1000"
              styleClass="w-full md:w-14rem"
            ></p-inputNumber>
          </div>

          <!-- Retry Attempts Setting -->
          <div class="setting-item">
            <div class="setting-label">
              <label for="retryAttempts">{{
                "SETTINGS.API.RETRY_ATTEMPTS" | translate
              }}</label>
              <small>{{
                "SETTINGS.API.RETRY_ATTEMPTS_DESC" | translate
              }}</small>
            </div>
            <p-inputNumber
              [(ngModel)]="settings.retryAttempts"
              [showButtons]="true"
              [min]="0"
              [max]="5"
              [step]="1"
              styleClass="w-full md:w-14rem"
            ></p-inputNumber>
          </div>
        </div>

        <p-divider></p-divider>

        <div class="settings-section">
          <h2>{{ "SETTINGS.API.AUTHENTICATION" | translate }}</h2>

          <!-- API Key Setting -->
          <div class="setting-item">
            <div class="setting-label">
              <label for="apiKey">{{
                "SETTINGS.API.API_KEY" | translate
              }}</label>
              <small>{{ "SETTINGS.API.API_KEY_DESC" | translate }}</small>
            </div>
            <input
              pInputText
              [(ngModel)]="settings.apiKey"
              type="password"
              class="w-full md:w-30rem"
              title="Enter your API key"
              placeholder="API Key"
            />
          </div>

          <!-- Token Refresh Setting -->
          <div class="setting-item">
            <div class="setting-label">
              <label for="tokenRefresh">{{
                "SETTINGS.API.TOKEN_REFRESH" | translate
              }}</label>
              <small>{{ "SETTINGS.API.TOKEN_REFRESH_DESC" | translate }}</small>
            </div>
            <p-inputSwitch
              [(ngModel)]="settings.tokenRefresh"
              inputId="tokenRefresh"
            ></p-inputSwitch>
          </div>
        </div>

        <div class="settings-actions">
          <button
            pButton
            label="{{ 'SETTINGS.ACTIONS.TEST_CONNECTION' | translate }}"
            icon="pi pi-link"
            class="p-button-outlined"
            (click)="testApiConnection()"
            title="Test API connection"
          ></button>
          <button
            pButton
            label="{{ 'SETTINGS.ACTIONS.RESET' | translate }}"
            icon="pi pi-refresh"
            class="p-button-outlined p-button-secondary"
            (click)="resetApiSettings()"
            title="Reset API settings"
          ></button>
          <button
            pButton
            label="{{ 'SETTINGS.ACTIONS.SAVE' | translate }}"
            icon="pi pi-check"
            (click)="saveSettings('api')"
            title="Save API settings"
          ></button>
        </div>
      </p-card>
    </p-tabPanel>
  </p-tabView>
</div>

<p-toast></p-toast>
